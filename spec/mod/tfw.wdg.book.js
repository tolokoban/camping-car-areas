require("tfw.wdg.book",function(t,e){function a(){return i(s,arguments)}function r(t){var e=t.element().querySelector("input[autofocus]");e&&window.setTimeout(e.focus.bind(e),300);var a=t.attr("data-activate");if(a){var r=window.APP[a];"function"==typeof r&&r(this)}this.eventChange.fire(this._pageID,t)}var s={en:{}},i=require("$").intl,n=require("tfw.hash-watcher"),o=require("wdg"),d=require("tfw.listeners"),l=function(t,e){var a,s,i,l,h=this,c={},u=0;if(Object.defineProperty(this,"eventChange",{value:new d}),"string"==typeof t)for(t=document.getElementById(t),o.call(this,{element:t}),t.$ctrl=this,a=0;a<t.childNodes.length;a++)s=t.childNodes[a],1==s.nodeType&&(s=new o({element:s}),i=s.attr("data-page"),i&&i.length>0?(s.addClass("page"),s.attr("data-index")?u=parseInt(s.attr("data-index"))||0:s.attr("data-index",u),c[i]=s,l?s.addClass("hide"):(l=s,this._pageID=i,r.call(this,s))):s.addClass("overlay"),u++);else{o.call(this);for(i in t)s=t[i],this.append(s),s.addClass("page"),s.attr("data-index",u),c[i]=s,l?s.addClass("hide"):(l=s,r.call(this,s))}this.addClass("tfw-wdg-book","fullscreen"),this._pages=c,this._current=l,l||(console.error("[tfw.wdg.book] Book without pages!"),console.error('[tfw.wdg.book] Pages must have the "data-page" attribute!')),"undefined"!=typeof e&&n(function(){var t=n.hash().split(";");t.forEach(function(t){t=t.trim();var a;t.substr(0,e.length+2)=="/"+e+"/"&&(a=t.substr(e.length+2).trim().split("/")[0],h.show(a))})})};l.prototype=Object.create(o.prototype),l.prototype.constructor=l,l.prototype.show=function(t){var e,a=this._pages,s=a[t];if("undefined"==typeof s)return console.error("[tfw.wdg.book.show] Unknown page `"+t+"`!"),!1;var i=this._current,n=parseInt(s.attr("data-index"))||0,o=parseInt(i.attr("data-index"))||0;s&&s!=i&&(i.removeClass("transition"),i.removeClass("right"),i.removeClass("hide"),s.removeClass("transition"),s.removeClass("right"),s.removeClass("hide"),o<n?(s.addClass("right"),e=s.rect(),i.addClass("hide"),s.removeClass("right")):(s.addClass("hide"),e=s.rect(),i.addClass("right"),s.removeClass("hide")),i.addClass("transition"),s.addClass("transition"),this._current=s,this._pageID=t,r.call(this,s))},l.create=function(t,e){return new l(t,e)},e.exports=l,e.exports._=a});
//# sourceMappingURL=tfw.wdg.book.js.map