require("tfw.wdg.book",function(t,e){"use strict";function a(t){var e=t.element().querySelector("input[autofocus]");e&&window.setTimeout(e.focus.bind(e),300);var a=t.attr("data-activate");if(a){var s=window.APP[a];"function"==typeof s&&s(this)}this.eventChange.fire(this._pageID,t)}var s=require("tfw.hash-watcher"),r=require("wdg"),i=require("tfw.listeners"),o=function(t,e){var o,n,d,l,h=this,c={},u=0;if(Object.defineProperty(this,"eventChange",{value:new i}),"string"==typeof t)for(t=document.getElementById(t),r.call(this,{element:t}),t.$ctrl=this,o=0;o<t.childNodes.length;o++)n=t.childNodes[o],1==n.nodeType&&(n=new r({element:n}),d=n.attr("data-page"),d&&d.length>0?(n.addClass("page"),n.attr("data-index")?u=parseInt(n.attr("data-index"))||0:n.attr("data-index",u),c[d]=n,l?n.addClass("hide"):(l=n,this._pageID=d,a.call(this,n))):n.addClass("overlay"),u++);else{r.call(this);for(d in t)n=t[d],this.append(n),n.addClass("page"),n.attr("data-index",u),c[d]=n,l?n.addClass("hide"):(l=n,a.call(this,n))}this.addClass("tfw-wdg-book","fullscreen"),this._pages=c,this._current=l,l||(console.error("[tfw.wdg.book] Book without pages!"),console.error('[tfw.wdg.book] Pages must have the "data-page" attribute!')),"undefined"!=typeof e&&s(function(){var t=s.hash().split(";");t.forEach(function(t){t=t.trim();var a;t.substr(0,e.length+2)=="/"+e+"/"&&(a=t.substr(e.length+2).trim().split("/")[0],h.show(a))})})};o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.show=function(t){var e,s=this._pages,r=s[t];if("undefined"==typeof r)return console.error("[tfw.wdg.book.show] Unknown page `"+t+"`!"),!1;var i=this._current,o=parseInt(r.attr("data-index"))||0,n=parseInt(i.attr("data-index"))||0;r&&r!=i&&(i.removeClass("transition"),i.removeClass("right"),i.removeClass("hide"),r.removeClass("transition"),r.removeClass("right"),r.removeClass("hide"),o>n?(r.addClass("right"),e=r.rect(),i.addClass("hide"),r.removeClass("right")):(r.addClass("hide"),e=r.rect(),i.addClass("right"),r.removeClass("hide")),i.addClass("transition"),r.addClass("transition"),this._current=r,this._pageID=t,a.call(this,r))},o.create=function(t,e){return new o(t,e)},e.exports=o});
//# sourceMappingURL=tfw.wdg.book.js.map