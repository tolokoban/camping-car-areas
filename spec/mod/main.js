require("main",function(e,t){function o(){d("#results").clear("Chargement en cours..."),s.find(a.getPosition()||u.get("lastPosition",{lat:46.15,lng:6.2}),function(e){console.info("[main] areas=...",e),i.display(e)})}var a=require("gps"),s=require("data"),n=require("wdg"),i=require("results"),r=require("$").config,u=require("tfw.storage").local,c=require("converter"),l=!0,d=function(e){var t=document.querySelector(e);return new n({element:t})};e.start=function(){d("#btnTrouver").addEvent("touchstart",function(e){e.preventDefault(),e.stopPropagation(),o(e)}),d("#gps").addEvent("touchstart",function(e){e.preventDefault(),e.stopPropagation(),0==u.get("sexagesimal",0)?(d("#gps").text("Mode sexagésimal activé..."),u.set("sexagesimal",1)):(d("#gps").text("Mode décimal activé..."),u.set("sexagesimal",0))}),s.init(function(){d("#init-btn").removeClass("hide"),d("#init-msg").clear().html("L'application <b>"+r.name+"</b> est en version <b>"+r.version+"</b>.<br/><br/><br/>Les données trouvées sur la carte SD datent du <b>"+s.getDate()+"</b> et possèdent <b>"+s.countAreas()+"</b> aires de camping-car et <b>"+s.countPhotos()+"</b> photos.<hr/><em>Cliquez sur le bandeau GPS pour passer du mode <b>décimal</b> au mode <b>sexagésimal</b>.</em>")},function(e){console.log("ERROR #"+e),location.hash="/book/err-"+e}),a.init(function(){var e=d("#gps"),t=a.getPosition();switch(a.getStatus()){case 0:case 10:e.text("Recherche GPS...");break;case 1:e.text("GPS non autorisé !"),location.hash="/book/err-gps";break;case 9:e.text("Pas d'antenne GPS !");break;default:l&&(l=!1,o()),u.set("lastPosition",{lat:t.coords.latitude,lng:t.coords.longitude}),0==u.get("sexagesimal",0)?e.text(t.coords.latitude.toFixed(6)+" ; "+t.coords.longitude.toFixed(6)):e.text(c.toHexagesimal(t.coords.latitude)+" ; "+c.toHexagesimal(t.coords.longitude))}})}});
//# sourceMappingURL=main.js.map