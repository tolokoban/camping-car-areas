require("main",function(e,t){function o(){return s(n,arguments)}function a(){m("#results").clear("Chargement en cours..."),i.find(r.getPosition()||d.get("lastPosition",{lat:46.15,lng:6.2}),function(e){console.info("[main] areas=...",e),c.display(e)})}var n={en:{},fr:{}},s=require("$").intl,r=require("gps"),i=require("data"),u=require("wdg"),c=require("results"),l=require("$").config,d=require("tfw.storage").local,g=require("converter"),b=!0,m=function(e){var t=document.querySelector(e);return new u({element:t})};e.start=function(){m("#btnTrouver").addEvent("touchstart",function(e){e.preventDefault(),e.stopPropagation(),a(e)}),m("#gps").addEvent("touchstart",function(e){e.preventDefault(),e.stopPropagation(),0==d.get("sexagesimal",0)?(m("#gps").text("Mode sexagésimal activé..."),d.set("sexagesimal",1)):(m("#gps").text("Mode décimal activé..."),d.set("sexagesimal",0))}),i.init(function(){m("#init-btn").removeClass("hide"),m("#init-msg").clear().html("L'application <b>"+l.name+"</b> est en version <b>"+l.version+"</b>.<br/><br/><br/>Les données trouvées sur la carte SD datent du <b>"+i.getDate()+"</b> et possèdent <b>"+i.countAreas()+"</b> aires de camping-car et <b>"+i.countPhotos()+"</b> photos.<hr/><em>Cliquez sur le bandeau GPS pour passer du mode <b>décimal</b> au mode <b>sexagésimal</b>.</em>")},function(e){console.log("ERROR #"+e),location.hash="/book/err-"+e}),r.init(function(){var e=m("#gps"),t=r.getPosition();switch(r.getStatus()){case 0:case 10:e.text("Recherche GPS...");break;case 1:e.text("GPS non autorisé !"),location.hash="/book/err-gps";break;case 9:e.text("Pas d'antenne GPS !");break;default:b&&(b=!1,a()),d.set("lastPosition",{lat:t.coords.latitude,lng:t.coords.longitude}),0==d.get("sexagesimal",0)?e.text(t.coords.latitude.toFixed(6)+" ; "+t.coords.longitude.toFixed(6)):e.text(g.toHexagesimal(t.coords.latitude)+" ; "+g.toHexagesimal(t.coords.longitude))}})},t.exports._=o});
//# sourceMappingURL=main.js.map